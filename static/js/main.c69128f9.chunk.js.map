{"version":3,"sources":["index.js"],"names":["Pendulum","props","state","theta_1","Math","PI","theta_2","omega_1","omega_2","E","this","draw","canvas1","refs","ctx2","canvas2","getContext","ctx","l1","g","cos","m2","E_calc","l2","m1","cosD","calcE","console","log","abs","theta_2_path","angles","h","a_omega_1","omega_1_dot","a_theta_1","a_omega_2","omega_2_dot","a_theta_2","temp_theta_1","temp_omega_1","temp_theta_2","temp_omega_2","b_omega_1","b_theta_1","b_omega_2","b_theta_2","c_omega_1","c_theta_1","c_omega_2","c_theta_2","d_omega_1","d_theta_1","d_omega_2","calcRK","clearRect","translate","width","height","rotate","drawRectangle","drawPath","setState","requestAnimationFrame","bind","l","fillStyle","beginPath","arc","fill","closePath","class","ref","React","Component","Simulation","m","w","fillRect","delta","sinD","sin","sin_t1","ReactDOM","render","document","getElementById"],"mappings":"oOAKMA,G,wDAEF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTC,SAAU,GAAKC,KAAKC,GAAK,IACzBC,SAAU,GAAKF,KAAKC,GAAK,IACzBE,QAAS,EACTC,QAAS,EACTC,EAAG,GAPQ,E,gEAYfC,KAAKC,S,6EAQL,IAAMC,EAAUF,KAAKG,KAAKD,QAEpBE,EADUJ,KAAKG,KAAKE,QACLC,WAAW,MAC1BC,EAAML,EAAQI,WAAW,MACzBE,EAAK,IAKLC,EAAI,KAGNV,EAAIC,KAAKR,MAAMO,EACnB,GAAU,IAANA,EACAA,GAAKU,GAAK,MAAoBf,KAAKgB,IAAIV,KAAKR,MAAMC,SAAWkB,KAAQjB,KAAKgB,IAAIV,KAAKR,MAAMI,cACtF,CACH,IAAMgB,EAgGlB,SAAef,EAASC,EAASL,EAASG,EAASY,EAAIK,EAAIC,EAAIH,EAAIF,GAC/D,IAAMM,EAAOrB,KAAKgB,IAAId,EAAUH,GAChC,OAAsBe,EAAGA,GAAjBM,EAAG,EAAIH,EAAG,GAAWd,EAAQA,EAAUc,EAAG,GAAGE,EAAGA,GAAIf,EAAQA,EAAUa,EAAG,EAAEH,EAAGK,EAAGE,EAAKlB,EAASC,EAAUW,IAAMK,EAAK,EAAIH,GAAMH,EAAId,KAAKgB,IAAIjB,GAAWkB,EAAGE,EAAG,EAAEnB,KAAKgB,IAAId,IAlGxJoB,CAAMhB,KAAKR,MAAMK,QAASG,KAAKR,MAAMM,QAASE,KAAKR,MAAMC,QAASO,KAAKR,MAAMI,QAASY,EAX9F,GAEA,GACA,GAQ8GC,GACrHQ,QAAQC,IAAI,cAAgBN,GACblB,KAAKyB,IAAIP,EAASZ,KAAKR,MAAMO,GAM7BC,KAAKR,MAAM4B,aAA9B,IAGMC,EA0Fd,SAAgBxB,EAASJ,EAASK,EAASF,EAAS0B,EAAGR,EAAIH,EAAIH,EAAIK,EAAIJ,GAEnE,IAAMc,EAAYC,EAAYV,EAAIH,EAAIlB,EAASG,EAASC,EAASC,EAASU,EAAIK,EAAIJ,GAC5EgB,EAAY5B,EACZ6B,EAAYC,EAAYb,EAAIH,EAAIlB,EAASG,EAASC,EAASC,EAASU,EAAIK,EAAIJ,GAC5EmB,EAAY9B,EAEd+B,EAAepC,EAAU,GAAM6B,EAAIG,EACnCK,EAAejC,EAAU,GAAMyB,EAAIC,EACnCQ,EAAenC,EAAU,GAAM0B,EAAIM,EACnCI,EAAelC,EAAU,GAAMwB,EAAII,EAEjCO,EAAYT,EAAYV,EAAIH,EAAIkB,EAAcE,EAAcD,EAAcE,EAAcxB,EAAIK,EAAIJ,GAChGyB,EAAYJ,EACZK,EAAYR,EAAYb,EAAIH,EAAIkB,EAAcE,EAAcD,EAAcE,EAAcxB,EAAIK,EAAIJ,GAChG2B,EAAYJ,EAOZK,EAAYb,EAAYV,EAAIH,EALlCkB,EAAepC,EAAU,GAAM6B,EAAIY,EAEnCH,EAAenC,EAAU,GAAM0B,EAAIc,EADnCN,EAAejC,EAAU,GAAMyB,EAAIW,EAEnCD,EAAelC,EAAU,GAAMwB,EAAIa,EAE2D3B,EAAIK,EAAIJ,GAChG6B,EAAYzC,EAAU,GAAMyB,EAAIW,EAChCM,EAAYZ,EAAYb,EAAIH,EAAIkB,EAAcE,EAAcD,EAAcE,EAAcxB,EAAIK,EAAIJ,GAChG+B,EAAY1C,EAAU,GAAMwB,EAAIa,EAOhCM,EAAYjB,EAAYV,EAAIH,EALlCkB,EAAepC,EAAU6B,EAAIgB,EAE7BP,EAAenC,EAAU0B,EAAIkB,EAD7BV,EAAejC,EAAUyB,EAAIe,EAE7BL,EAAelC,EAAUwB,EAAIiB,EAEiE/B,EAAIK,EAAIJ,GAChGiC,EAAY7C,EAAUyB,EAAIe,EAC1BM,EAAYhB,EAAYb,EAAIH,EAAIkB,EAAcE,EAAcD,EAAcE,EAAcxB,EAAIK,EAAIJ,GAQtG,MAAO,CALcZ,EAAWyB,EAAI,GAAMC,EAAY,EAAIU,EAAY,EAAII,EAAYI,GACjEhD,EAAW6B,EAAI,GAAMG,EAAY,EAAIS,EAAY,EAAII,EAAYI,GACjE5C,EAAWwB,EAAI,GAAMI,EAAY,EAAIS,EAAY,EAAII,EAAYI,GACjE/C,EAAW0B,EAAI,GAAMM,EAAY,EAAIQ,EAAY,EAAII,GALxD1C,EAAUwB,EAAIiB,KA7HbK,CAAO5C,KAAKR,MAAMK,QAASG,KAAKR,MAAMC,QAASO,KAAKR,MAAMM,QAASE,KAAKR,MAAMI,QArBlF,GACA,GACA,GAmBuGY,EAtBvG,GAsB+GC,GAC1HF,EAAIsC,UAAU,EAAG,EAAG,IAAM,KAE1BtC,EAAIuC,UAAW5C,EAAQ6C,MAAM,EAAG7C,EAAQ8C,OAAS,GACjD5C,EAAK0C,UAAW5C,EAAQ6C,MAAM,EAAG7C,EAAQ8C,OAAS,GAElDzC,EAAI0C,OAAQ5B,EAAO,IACnBjB,EAAK6C,OAAQ5B,EAAO,IAEpB6B,EAAc1C,EA7BH,GA6BWD,GAGtBA,EAAIuC,UAAU,EAAGtC,KACjBJ,EAAK0C,UAAU,EAAGtC,KAElBD,EAAI0C,OAAQ5B,EAAO,GAAKA,EAAO,IAC/BjB,EAAK6C,OAAQ5B,EAAO,GAAKA,EAAO,IAEhC6B,EAxCW,GAGA,GAqCW3C,GACtBP,KAAKmD,SAzCM,GAyCO/C,GAElBG,EAAI0C,QAAS5B,EAAO,GAAKA,EAAO,IAChCjB,EAAK6C,QAAS5B,EAAO,GAAKA,EAAO,IAEjCd,EAAIuC,UAAU,GAAG,KACjB1C,EAAK0C,UAAU,GAAG,KAElBvC,EAAI0C,QAAQ5B,EAAO,IACnBjB,EAAK6C,QAAQ5B,EAAO,IAGpBd,EAAIuC,WAAY5C,EAAQ6C,MAAM,GAAI7C,EAAQ8C,OAAS,GACnD5C,EAAK0C,WAAY5C,EAAQ6C,MAAM,GAAI7C,EAAQ8C,OAAS,GAEpDhD,KAAKoD,SAAS,CACV3D,QAAS4B,EAAO,GAChBzB,QAASyB,EAAO,GAChBxB,QAASwB,EAAO,GAChBvB,QAASuB,EAAO,GAChBtB,EAAGA,IAGPsD,sBAAsBrD,KAAKC,KAAKqD,KAAKtD,S,+BAIhCuD,EAAGhD,GACRA,EAAIiD,UAAY,MAChBjD,EAAIuC,UAAU,EAAIS,GAClBhD,EAAIkD,YACJlD,EAAImD,IAAI,EAAE,EAAE,EAAE,EAAEhE,KAAKC,GAAG,EAAED,KAAKC,IAC/BY,EAAIoD,OACJpD,EAAIqD,YACJrD,EAAIuC,UAAU,GAAIS,K,+BAIlB,OACI,yBAAKM,MAAM,WACP,4BAAQC,IAAI,UAAUf,MAAO,IAAKC,OAAQ,MAC1C,4BAAQc,IAAI,UAAUf,MAAO,IAAKC,OAAQ,W,GA7GnCe,IAAMC,YAmHvBC,E,uKAGE,OACI,kBAAC3E,EAAD,U,GAJayE,IAAMC,WAS/B,SAASd,EAAcK,EAAGW,EAAG3D,GACzB,IAAM4D,EAAID,EAAE,GACZ3D,EAAIiD,UAAY,QAChBjD,EAAI6D,UAAUD,EAAE,EAAG,EAAGA,EAAGZ,GACzBhD,EAAIkD,YACJlD,EAAImD,IAAI,EAAE,EAAE,EAAE,EAAEhE,KAAKC,GAAG,EAAED,KAAKC,IAC/BY,EAAIiD,UAAY,OAChBjD,EAAIoD,OAqDR,SAASnC,EAAYV,EAAIH,EAAIlB,EAASG,EAASC,EAASC,EAASU,EAAIK,EAAIJ,GACrE,IAAM4D,EAAQzE,EAAUH,EAClBsB,EAAOrB,KAAKgB,IAAI2D,GAChBC,EAAO5E,KAAK6E,IAAIF,GAatB,OATY,GAAM,EAAExD,EAAGF,EAAG2D,EAAKxE,EAAQA,EAAU,EAAEU,EAAGG,EAAGI,EAAKuD,EAAKzE,EAAQA,EAAUY,EAHtEf,KAAK6E,IAAI9E,IAGuE,EAAEqB,EAAK,EAAEH,GAAM,EAAEF,EAAEE,EAAGI,EAFtGrB,KAAK6E,IAAI3E,KAGVY,GAAM,EAAEM,EAAK,GAAKH,EAAK,EAAII,EAAOA,IAYpD,SAASY,EAAYb,EAAIH,EAAIlB,EAASG,EAASC,EAASC,EAASU,EAAIK,EAAIJ,GACrE,IAAM4D,EAAQzE,EAAUH,EAClBsB,EAAOrB,KAAKgB,IAAI2D,GAChBC,EAAO5E,KAAK6E,IAAIF,GAChBG,EAAS9E,KAAK6E,IAAI9E,GAYxB,OATa,IAAO,EAAEgB,EAAEK,EAAGC,EAAKyD,EAAS/D,EAF1Bf,KAAK6E,IAAI3E,IAE2B,EAAEe,EAAK,EAAEG,GAAM,EAAEL,EAAEE,EAAGI,EAAKyD,EAAShE,EAAG8D,EAAKzE,EAAQA,GAAS,EAAEiB,EAAK,EAAEH,GAAM,EAAEE,EAAGF,EAAGI,EAAKuD,EAAKxE,EAAQA,IAC3Ie,GAAM,EAAEC,EAAK,GAAKH,EAAK,EAAII,EAAOA,IAclD0D,IAASC,OACP,kBAACT,EAAD,MACAU,SAASC,eAAe,W","file":"static/js/main.c69128f9.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\n  \nclass Pendulum extends React.Component {\n  \n    constructor(props) {\n        super(props)\n        this.state = {\n            theta_1: -80 * Math.PI / 180,\n            theta_2: -90 * Math.PI / 180,\n            omega_1: 0,\n            omega_2: 0,\n            E: 0,\n        };\n    }\n\n    componentDidMount() {\n        this.draw()\n    }\n     \n    componentWillUnmount() {\n    }\n\n\n    draw() {\n        const canvas1 = this.refs.canvas1;\n        const canvas2 = this.refs.canvas2;\n        const ctx2 = canvas2.getContext(\"2d\");\n        const ctx = canvas1.getContext(\"2d\");\n        const l1 = 120;\n        const l2 = 90;\n        const dt = 1/10;\n        const m1 = 70;\n        const m2 = 80;\n        const g = 9.81;\n        const E_tol = 100000;\n\n        var E = this.state.E;\n        if (E === 0) {\n            E = -g * ((m1 / 2 + m2) * l1* Math.cos(this.state.theta_1) + m2*l2/2*Math.cos(this.state.theta_2));\n        } else {\n            const E_calc = calcE(this.state.omega_1, this.state.omega_2, this.state.theta_1, this.state.theta_2, l1, l2, m1, m2, g);\n            console.log(\"E_calc is: \" + E_calc);\n            const E_diff = Math.abs(E_calc - this.state.E);\n            // console.log(\"E_diff is: \" + E_diff);\n            if (E_diff > E_tol) {\n                // window.alert('E differential is' + E);\n            }\n        }\n        const theta_path = this.state.theta_2_path;\n\n        //[omega_1, theta_1, omega_2, theta_2]\n        const angles = calcRK(this.state.omega_1, this.state.theta_1, this.state.omega_2, this.state.theta_2, dt, m1, m2, l1, l2, g);\n        ctx.clearRect(0, 0, 2000, 2000);\n\n        ctx.translate( canvas1.width/2, canvas1.height / 2 );\n        ctx2.translate( canvas1.width/2, canvas1.height / 2 );\n\n        ctx.rotate( angles[1] );\n        ctx2.rotate( angles[1] );\n\n        drawRectangle(l1, m1, ctx);\n\n\n        ctx.translate(0, l1 - 3);\n        ctx2.translate(0, l1 - 3);\n\n        ctx.rotate( angles[3] - angles[1] );\n        ctx2.rotate( angles[3] - angles[1] );\n\n        drawRectangle(l2, m2, ctx);\n        this.drawPath(l2, ctx2);\n\n        ctx.rotate( -angles[3] + angles[1]);\n        ctx2.rotate( -angles[3] + angles[1] );\n\n        ctx.translate(0, -l1 + 3);\n        ctx2.translate(0, -l1 + 3);\n\n        ctx.rotate(-angles[1]);\n        ctx2.rotate(-angles[1]);\n        // ctx.translate( l1 * Math.sin(angles[1]),  - l1 * Math.cos(angles[1]));\n\n        ctx.translate( -canvas1.width/2, -canvas1.height / 2 );\n        ctx2.translate( -canvas1.width/2, -canvas1.height / 2 );\n\n        this.setState({\n            theta_1: angles[1],\n            theta_2: angles[3],\n            omega_1: angles[0],\n            omega_2: angles[2],\n            E: E,\n        });\n\n        requestAnimationFrame(this.draw.bind(this))\n\n    }\n\n    drawPath(l, ctx) {\n        ctx.fillStyle = 'red';\n        ctx.translate(0 , l);\n        ctx.beginPath();\n        ctx.arc(0,0,2,0*Math.PI,2*Math.PI);\n        ctx.fill();\n        ctx.closePath();\n        ctx.translate(0, -l);\n    }\n\n    render() {\n        return(\n            <div class=\"wrapper\">\n                <canvas ref=\"canvas1\" width={700} height={700} />\n                <canvas ref=\"canvas2\" width={700} height={700} />\n            </div>\n        )\n    }\n  }\n  \nclass Simulation extends React.Component {\n\n    render() {\n        return(\n            <Pendulum />\n        )\n    }\n}\n\nfunction drawRectangle(l, m, ctx) {\n    const w = m/10;\n    ctx.fillStyle = 'black';\n    ctx.fillRect(-w/2, 0, w, l);\n    ctx.beginPath();\n    ctx.arc(0,0,3,0*Math.PI,2*Math.PI)\n    ctx.fillStyle = 'blue';\n    ctx.fill();\n}\n\nfunction calcE(omega_1, omega_2, theta_1, theta_2, l1, l2, m1, m2, g) {\n    const cosD = Math.cos(theta_2 - theta_1);\n    return (m1/6 + m2/2)*(l1*l1)*omega_1*omega_1 + m2/6*(l2*l2)*omega_2*omega_2 + m2/2*l1*l2*cosD*omega_1 *omega_2 - g * ((m1 / 2 + m2) * l1* Math.cos(theta_1) + m2*l2/2*Math.cos(theta_2));\n}\n\nfunction calcRK(omega_1, theta_1, omega_2, theta_2, h, m1, m2, l1, l2, g) {\n\n    const a_omega_1 = omega_1_dot(m1, m2, theta_1, theta_2, omega_1, omega_2, l1, l2, g);\n    const a_theta_1 = omega_1;\n    const a_omega_2 = omega_2_dot(m1, m2, theta_1, theta_2, omega_1, omega_2, l1, l2, g);\n    const a_theta_2 = omega_2;\n\n    let temp_theta_1 = theta_1 + 0.5 * h * a_theta_1;\n    let temp_omega_1 = omega_1 + 0.5 * h * a_omega_1;\n    let temp_theta_2 = theta_2 + 0.5 * h * a_theta_2;\n    let temp_omega_2 = omega_2 + 0.5 * h * a_omega_2;\n\n    const b_omega_1 = omega_1_dot(m1, m2, temp_theta_1, temp_theta_2, temp_omega_1, temp_omega_2, l1, l2, g);\n    const b_theta_1 = temp_omega_1;\n    const b_omega_2 = omega_2_dot(m1, m2, temp_theta_1, temp_theta_2, temp_omega_1, temp_omega_2, l1, l2, g);\n    const b_theta_2 = temp_omega_2;\n\n    temp_theta_1 = theta_1 + 0.5 * h * b_theta_1;\n    temp_omega_1 = omega_1 + 0.5 * h * b_omega_1;\n    temp_theta_2 = theta_2 + 0.5 * h * b_theta_2;\n    temp_omega_2 = omega_2 + 0.5 * h * b_omega_2;\n\n    const c_omega_1 = omega_1_dot(m1, m2, temp_theta_1, temp_theta_2, temp_omega_1, temp_omega_2, l1, l2, g);\n    const c_theta_1 = omega_1 + 0.5 * h * b_omega_1;\n    const c_omega_2 = omega_2_dot(m1, m2, temp_theta_1, temp_theta_2, temp_omega_1, temp_omega_2, l1, l2, g);\n    const c_theta_2 = omega_2 + 0.5 * h * b_omega_2;\n\n    temp_theta_1 = theta_1 + h * c_theta_1;\n    temp_omega_1 = omega_1 + h * c_omega_1;\n    temp_theta_2 = theta_2 + h * c_theta_2;\n    temp_omega_2 = omega_2 + h * c_omega_2;\n\n    const d_omega_1 = omega_1_dot(m1, m2, temp_theta_1, temp_theta_2, temp_omega_1, temp_omega_2, l1, l2, g);\n    const d_theta_1 = omega_1 + h * c_omega_1;\n    const d_omega_2 = omega_2_dot(m1, m2, temp_theta_1, temp_theta_2, temp_omega_1, temp_omega_2, l1, l2, g);\n    const d_theta_2 = omega_2 + h * c_omega_2;\n\n    const calc_omega_1 = omega_1 + (h / 6) * (a_omega_1 + 2 * b_omega_1 + 2 * c_omega_1 + d_omega_1);\n    const calc_theta_1 = theta_1 + (h / 6) * (a_theta_1 + 2 * b_theta_1 + 2 * c_theta_1 + d_theta_1);\n    const calc_omega_2 = omega_2 + (h / 6) * (a_omega_2 + 2 * b_omega_2 + 2 * c_omega_2 + d_omega_2);\n    const calc_theta_2 = theta_2 + (h / 6) * (a_theta_2 + 2 * b_theta_2 + 2 * c_theta_2 + d_theta_2);\n\n    return [calc_omega_1, calc_theta_1, calc_omega_2, calc_theta_2]\n}\n\nfunction omega_1_dot(m1, m2, theta_1, theta_2, omega_1, omega_2, l1, l2, g) {\n    const delta = theta_2 - theta_1;\n    const cosD = Math.cos(delta);\n    const sinD = Math.sin(delta);\n    const sin_t1 = Math.sin(theta_1);\n    const sin_t2 = Math.sin(theta_2);\n\n    const num = 3  * (2*l2*m2*sinD*omega_2*omega_2 + 3*l1*m2*cosD*sinD*omega_1*omega_1 - g*sin_t1*(2*m1 + 4*m2) + 3*g*m2*cosD*sin_t2);\n    const denom = l1 * (4*m1 + 12 * m2 - 9 * cosD * cosD);\n\n    // const mu = 1 + (m1/m2);\n    // const num = g * (Math.sin(theta_2) * Math.cos(delta) - mu * Math.sin(theta_1)) - \n    //     Math.sin(delta) * (l2*omega_2*omega_2 + l1*omega_1*omega_1* Math.cos(delta));\n\n    // const denom = l1 * (mu - Math.cos(delta)* Math.cos(delta));\n\n    return num / denom;\n\n}\n\nfunction omega_2_dot(m1, m2, theta_1, theta_2, omega_1, omega_2, l1, l2, g) {\n    const delta = theta_2 - theta_1;\n    const cosD = Math.cos(delta);\n    const sinD = Math.sin(delta);\n    const sin_t1 = Math.sin(theta_1);\n    const sin_t2 = Math.sin(theta_2);\n\n    const num = -3  * (-3*g*m1*cosD*sin_t1 + g*sin_t2*(6*m2 + 2*m1) - 6*g*m2*cosD*sin_t1 + l1*sinD*omega_1*omega_1*(2*m1 + 6*m2) + 3*l2*m2*cosD*sinD*omega_2*omega_2);\n    const denom = l2 * (4*m1 + 12 * m2 - 9 * cosD * cosD);\n\n    // const mu = 1 + (m1/m2);\n    // const num = g * mu * (Math.sin(theta_1) * Math.cos(delta) -  Math.sin(theta_2)) + \n    //     Math.sin(delta) * (mu*l1*omega_1*omega_1 + l2*omega_2*omega_2* Math.cos(delta));\n\n    // const denom = l2 * (mu - Math.cos(delta)* Math.cos(delta));\n\n    return num / denom;\n\n}\n  \n  // ========================================\n  \n  ReactDOM.render(\n    <Simulation />,\n    document.getElementById('root')\n  );"],"sourceRoot":""}